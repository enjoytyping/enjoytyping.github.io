import { AppStateClient } from '../../state/app-state.client';
import { IAppStateClient } from '../../state/app-state.client.interface';
import Ads from './ads.model';
import IAdsService from './ads.service';

const AMAZON_ADS_LINKS_LIGHT_THEME = [
  '<iframe style="width:120px;height:240px;" marginwidth="0" marginheight="0" scrolling="no" frameborder="0" src="//ws-na.amazon-adsystem.com/widgets/q?ServiceVersion=20070822&OneJS=1&Operation=GetAdHtml&MarketPlace=US&source=ac&ref=tf_til&ad_type=product_link&tracking_id=enjoytyping-20&marketplace=amazon&amp;region=US&placement=B07PXGQC1Q&asins=B07PXGQC1Q&linkId=73ff332f2d3e13c052f24754cbfa3bb7&show_border=false&link_opens_in_new_window=true&price_color=333333&title_color=0066c0&bg_color=ffffff"></iframe>',
  '<iframe style="width:120px;height:240px;" marginwidth="0" marginheight="0" scrolling="no" frameborder="0" src="//ws-na.amazon-adsystem.com/widgets/q?ServiceVersion=20070822&OneJS=1&Operation=GetAdHtml&MarketPlace=US&source=ac&ref=tf_til&ad_type=product_link&tracking_id=enjoytyping-20&marketplace=amazon&amp;region=US&placement=B07X6C9RMF&asins=B07X6C9RMF&linkId=11d07cbc88f9866c71a1e084895c8221&show_border=false&link_opens_in_new_window=true&price_color=333333&title_color=0066c0&bg_color=ffffff"></iframe>',
  '<iframe style="width:120px;height:240px;" marginwidth="0" marginheight="0" scrolling="no" frameborder="0" src="//ws-na.amazon-adsystem.com/widgets/q?ServiceVersion=20070822&OneJS=1&Operation=GetAdHtml&MarketPlace=US&source=ac&ref=tf_til&ad_type=product_link&tracking_id=enjoytyping-20&marketplace=amazon&amp;region=US&placement=B08B3X7NXC&asins=B08B3X7NXC&linkId=e50e97560090851d51829aa484bfef3a&show_border=false&link_opens_in_new_window=true&price_color=333333&title_color=0066c0&bg_color=ffffff"></iframe>',
  '<iframe style="width:120px;height:240px;" marginwidth="0" marginheight="0" scrolling="no" frameborder="0" src="//ws-na.amazon-adsystem.com/widgets/q?ServiceVersion=20070822&OneJS=1&Operation=GetAdHtml&MarketPlace=US&source=ac&ref=tf_til&ad_type=product_link&tracking_id=enjoytyping-20&marketplace=amazon&amp;region=US&placement=B07F3TQ6DQ&asins=B07F3TQ6DQ&linkId=dd55f96401d460732a29b19f693176ac&show_border=false&link_opens_in_new_window=true&price_color=333333&title_color=0066c0&bg_color=ffffff"></iframe>',
  '<iframe style="width:120px;height:240px;" marginwidth="0" marginheight="0" scrolling="no" frameborder="0" src="//ws-na.amazon-adsystem.com/widgets/q?ServiceVersion=20070822&OneJS=1&Operation=GetAdHtml&MarketPlace=US&source=ac&ref=tf_til&ad_type=product_link&tracking_id=enjoytyping-20&marketplace=amazon&amp;region=US&placement=B00ZSI7Y3U&asins=B00ZSI7Y3U&linkId=226188ea2c595c1f3d3ccba5b6374d1c&show_border=false&link_opens_in_new_window=true&price_color=333333&title_color=0066c0&bg_color=ffffff"></iframe>',
  '<iframe style="width:120px;height:240px;" marginwidth="0" marginheight="0" scrolling="no" frameborder="0" src="//ws-na.amazon-adsystem.com/widgets/q?ServiceVersion=20070822&OneJS=1&Operation=GetAdHtml&MarketPlace=US&source=ac&ref=tf_til&ad_type=product_link&tracking_id=enjoytyping-20&marketplace=amazon&amp;region=US&placement=B095PQBTMF&asins=B095PQBTMF&linkId=d5e2b5122c9a8c6d14f866b0bbd65c5d&show_border=false&link_opens_in_new_window=true&price_color=333333&title_color=0066c0&bg_color=ffffff"></iframe>',
  '<iframe style="width:120px;height:240px;" marginwidth="0" marginheight="0" scrolling="no" frameborder="0" src="//ws-na.amazon-adsystem.com/widgets/q?ServiceVersion=20070822&OneJS=1&Operation=GetAdHtml&MarketPlace=US&source=ac&ref=tf_til&ad_type=product_link&tracking_id=enjoytyping-20&marketplace=amazon&amp;region=US&placement=B0933BVK6T&asins=B0933BVK6T&linkId=17599506dc4757c5f7797e63001d1d30&show_border=false&link_opens_in_new_window=true&price_color=333333&title_color=0066c0&bg_color=ffffff"></iframe>',
  '<iframe style="width:120px;height:240px;" marginwidth="0" marginheight="0" scrolling="no" frameborder="0" src="//ws-na.amazon-adsystem.com/widgets/q?ServiceVersion=20070822&OneJS=1&Operation=GetAdHtml&MarketPlace=US&source=ac&ref=tf_til&ad_type=product_link&tracking_id=enjoytyping-20&marketplace=amazon&amp;region=US&placement=B08GYKNCCP&asins=B08GYKNCCP&linkId=ebfdf653e8311d9f86250c1e0ebea893&show_border=false&link_opens_in_new_window=true&price_color=333333&title_color=0066c0&bg_color=ffffff"></iframe>',
  '<iframe style="width:120px;height:240px;" marginwidth="0" marginheight="0" scrolling="no" frameborder="0" src="//ws-na.amazon-adsystem.com/widgets/q?ServiceVersion=20070822&OneJS=1&Operation=GetAdHtml&MarketPlace=US&source=ac&ref=tf_til&ad_type=product_link&tracking_id=enjoytyping-20&marketplace=amazon&amp;region=US&placement=B07H9DVLBB&asins=B07H9DVLBB&linkId=6e52edbe23b2d2c944f7c1ed780e9085&show_border=false&link_opens_in_new_window=true&price_color=333333&title_color=0066c0&bg_color=ffffff"></iframe>',
  '<iframe style="width:120px;height:240px;" marginwidth="0" marginheight="0" scrolling="no" frameborder="0" src="//ws-na.amazon-adsystem.com/widgets/q?ServiceVersion=20070822&OneJS=1&Operation=GetAdHtml&MarketPlace=US&source=ac&ref=tf_til&ad_type=product_link&tracking_id=enjoytyping-20&marketplace=amazon&amp;region=US&placement=B01LWDCSIZ&asins=B01LWDCSIZ&linkId=9e1fe958391c86ba549d59dca4c1ad43&show_border=false&link_opens_in_new_window=true&price_color=333333&title_color=0066c0&bg_color=ffffff"></iframe>',
  '<iframe style="width:120px;height:240px;" marginwidth="0" marginheight="0" scrolling="no" frameborder="0" src="//ws-na.amazon-adsystem.com/widgets/q?ServiceVersion=20070822&OneJS=1&Operation=GetAdHtml&MarketPlace=US&source=ac&ref=tf_til&ad_type=product_link&tracking_id=enjoytyping-20&marketplace=amazon&amp;region=US&placement=B07VCBQ6KF&asins=B07VCBQ6KF&linkId=fff5b1cea0d2ca420318038a7f26c39c&show_border=false&link_opens_in_new_window=true&price_color=333333&title_color=0066c0&bg_color=ffffff"></iframe>',
  '<iframe style="width:120px;height:240px;" marginwidth="0" marginheight="0" scrolling="no" frameborder="0" src="//ws-na.amazon-adsystem.com/widgets/q?ServiceVersion=20070822&OneJS=1&Operation=GetAdHtml&MarketPlace=US&source=ac&ref=tf_til&ad_type=product_link&tracking_id=enjoytyping-20&marketplace=amazon&amp;region=US&placement=B08PF9SV4Y&asins=B08PF9SV4Y&linkId=643d321fe990fcc0bab3f2ebda5cfd61&show_border=false&link_opens_in_new_window=true&price_color=333333&title_color=0066c0&bg_color=ffffff"></iframe>',
];

const AMAZON_ADS_LINKS_DARK_THEME = [
  '<iframe style="width:120px;height:240px;" marginwidth="0" marginheight="0" scrolling="no" frameborder="0" src="//ws-na.amazon-adsystem.com/widgets/q?ServiceVersion=20070822&OneJS=1&Operation=GetAdHtml&MarketPlace=US&source=ac&ref=tf_til&ad_type=product_link&tracking_id=enjoytyping-20&marketplace=amazon&amp;region=US&placement=B07PXGQC1Q&asins=B07PXGQC1Q&linkId=73ff332f2d3e13c052f24754cbfa3bb7&show_border=false&link_opens_in_new_window=true&price_color=eee&title_color=078EED&bg_color=21252b"></iframe>',
  '<iframe style="width:120px;height:240px;" marginwidth="0" marginheight="0" scrolling="no" frameborder="0" src="//ws-na.amazon-adsystem.com/widgets/q?ServiceVersion=20070822&OneJS=1&Operation=GetAdHtml&MarketPlace=US&source=ac&ref=tf_til&ad_type=product_link&tracking_id=enjoytyping-20&marketplace=amazon&amp;region=US&placement=B07X6C9RMF&asins=B07X6C9RMF&linkId=11d07cbc88f9866c71a1e084895c8221&show_border=false&link_opens_in_new_window=true&price_color=eee&title_color=078EED&bg_color=21252b"></iframe>',
  '<iframe style="width:120px;height:240px;" marginwidth="0" marginheight="0" scrolling="no" frameborder="0" src="//ws-na.amazon-adsystem.com/widgets/q?ServiceVersion=20070822&OneJS=1&Operation=GetAdHtml&MarketPlace=US&source=ac&ref=tf_til&ad_type=product_link&tracking_id=enjoytyping-20&marketplace=amazon&amp;region=US&placement=B08B3X7NXC&asins=B08B3X7NXC&linkId=e50e97560090851d51829aa484bfef3a&show_border=false&link_opens_in_new_window=true&price_color=eee&title_color=078EED&bg_color=21252b"></iframe>',
  '<iframe style="width:120px;height:240px;" marginwidth="0" marginheight="0" scrolling="no" frameborder="0" src="//ws-na.amazon-adsystem.com/widgets/q?ServiceVersion=20070822&OneJS=1&Operation=GetAdHtml&MarketPlace=US&source=ac&ref=tf_til&ad_type=product_link&tracking_id=enjoytyping-20&marketplace=amazon&amp;region=US&placement=B07F3TQ6DQ&asins=B07F3TQ6DQ&linkId=dd55f96401d460732a29b19f693176ac&show_border=false&link_opens_in_new_window=true&price_color=eee&title_color=078EED&bg_color=21252b"></iframe>',
  '<iframe style="width:120px;height:240px;" marginwidth="0" marginheight="0" scrolling="no" frameborder="0" src="//ws-na.amazon-adsystem.com/widgets/q?ServiceVersion=20070822&OneJS=1&Operation=GetAdHtml&MarketPlace=US&source=ac&ref=tf_til&ad_type=product_link&tracking_id=enjoytyping-20&marketplace=amazon&amp;region=US&placement=B00ZSI7Y3U&asins=B00ZSI7Y3U&linkId=226188ea2c595c1f3d3ccba5b6374d1c&show_border=false&link_opens_in_new_window=true&price_color=eee&title_color=078EED&bg_color=21252b"></iframe>',
  '<iframe style="width:120px;height:240px;" marginwidth="0" marginheight="0" scrolling="no" frameborder="0" src="//ws-na.amazon-adsystem.com/widgets/q?ServiceVersion=20070822&OneJS=1&Operation=GetAdHtml&MarketPlace=US&source=ac&ref=tf_til&ad_type=product_link&tracking_id=enjoytyping-20&marketplace=amazon&amp;region=US&placement=B095PQBTMF&asins=B095PQBTMF&linkId=d5e2b5122c9a8c6d14f866b0bbd65c5d&show_border=false&link_opens_in_new_window=true&price_color=eee&title_color=078EED&bg_color=21252b"></iframe>',
  '<iframe style="width:120px;height:240px;" marginwidth="0" marginheight="0" scrolling="no" frameborder="0" src="//ws-na.amazon-adsystem.com/widgets/q?ServiceVersion=20070822&OneJS=1&Operation=GetAdHtml&MarketPlace=US&source=ac&ref=tf_til&ad_type=product_link&tracking_id=enjoytyping-20&marketplace=amazon&amp;region=US&placement=B0933BVK6T&asins=B0933BVK6T&linkId=17599506dc4757c5f7797e63001d1d30&show_border=false&link_opens_in_new_window=true&price_color=eee&title_color=078EED&bg_color=21252b"></iframe>',
  '<iframe style="width:120px;height:240px;" marginwidth="0" marginheight="0" scrolling="no" frameborder="0" src="//ws-na.amazon-adsystem.com/widgets/q?ServiceVersion=20070822&OneJS=1&Operation=GetAdHtml&MarketPlace=US&source=ac&ref=tf_til&ad_type=product_link&tracking_id=enjoytyping-20&marketplace=amazon&amp;region=US&placement=B08GYKNCCP&asins=B08GYKNCCP&linkId=ebfdf653e8311d9f86250c1e0ebea893&show_border=false&link_opens_in_new_window=true&price_color=eee&title_color=078EED&bg_color=21252b"></iframe>',
  '<iframe style="width:120px;height:240px;" marginwidth="0" marginheight="0" scrolling="no" frameborder="0" src="//ws-na.amazon-adsystem.com/widgets/q?ServiceVersion=20070822&OneJS=1&Operation=GetAdHtml&MarketPlace=US&source=ac&ref=tf_til&ad_type=product_link&tracking_id=enjoytyping-20&marketplace=amazon&amp;region=US&placement=B07H9DVLBB&asins=B07H9DVLBB&linkId=6e52edbe23b2d2c944f7c1ed780e9085&show_border=false&link_opens_in_new_window=true&price_color=eee&title_color=078EED&bg_color=21252b"></iframe>',
  '<iframe style="width:120px;height:240px;" marginwidth="0" marginheight="0" scrolling="no" frameborder="0" src="//ws-na.amazon-adsystem.com/widgets/q?ServiceVersion=20070822&OneJS=1&Operation=GetAdHtml&MarketPlace=US&source=ac&ref=tf_til&ad_type=product_link&tracking_id=enjoytyping-20&marketplace=amazon&amp;region=US&placement=B01LWDCSIZ&asins=B01LWDCSIZ&linkId=9e1fe958391c86ba549d59dca4c1ad43&show_border=false&link_opens_in_new_window=true&price_color=eee&title_color=078EED&bg_color=21252b"></iframe>',
  '<iframe style="width:120px;height:240px;" marginwidth="0" marginheight="0" scrolling="no" frameborder="0" src="//ws-na.amazon-adsystem.com/widgets/q?ServiceVersion=20070822&OneJS=1&Operation=GetAdHtml&MarketPlace=US&source=ac&ref=tf_til&ad_type=product_link&tracking_id=enjoytyping-20&marketplace=amazon&amp;region=US&placement=B07VCBQ6KF&asins=B07VCBQ6KF&linkId=fff5b1cea0d2ca420318038a7f26c39c&show_border=false&link_opens_in_new_window=true&price_color=eee&title_color=078EED&bg_color=21252b"></iframe>',
  '<iframe style="width:120px;height:240px;" marginwidth="0" marginheight="0" scrolling="no" frameborder="0" src="//ws-na.amazon-adsystem.com/widgets/q?ServiceVersion=20070822&OneJS=1&Operation=GetAdHtml&MarketPlace=US&source=ac&ref=tf_til&ad_type=product_link&tracking_id=enjoytyping-20&marketplace=amazon&amp;region=US&placement=B08PF9SV4Y&asins=B08PF9SV4Y&linkId=643d321fe990fcc0bab3f2ebda5cfd61&show_border=false&link_opens_in_new_window=true&price_color=eee&title_color=078EED&bg_color=21252b"></iframe>',
];

export default class AmazonAdsService implements IAdsService {
  constructor(private appStateClient: IAppStateClient = AppStateClient.getInstance()) {}

  getAds(count: number): Ads {
    // code inspiration: https://stackoverflow.com/questions/19269545/how-to-get-a-number-of-random-elements-from-an-array
    const arr = this.appStateClient.getAppState().currentTheme == 'light' ? AMAZON_ADS_LINKS_LIGHT_THEME : AMAZON_ADS_LINKS_DARK_THEME;
    let n = count * 2;
    const result = new Array(n);
    let len = arr.length;
    const taken = new Array(len);
    while (n--) {
      const x = Math.floor(Math.random() * len);
      result[n] = arr[x in taken ? taken[x] : x];
      taken[x] = --len in taken ? taken[len] : len;
    }
    return new Ads(result.slice(0, count).join(''), result.slice(count).join(''));
  }
}
